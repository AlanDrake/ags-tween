// GUI Tests (room 6) script file

int _gTestX, _gTestY, _gTestWidth, _gTestHeight, _gBackgroundColor, _gBorderColor;

function SaveTestGUI() {
  _gTestX = gTest.X;
  _gTestY = gTest.Y;
  _gTestWidth = gTest.Width;
  _gTestHeight = gTest.Height;
  _gBackgroundColor = gTest.BackgroundColor;
  _gBorderColor = gTest.BorderColor;
}

function RestoreTestGUI() {
  gTest.X = _gTestX;
  gTest.Y = _gTestY;
  gTest.Width = _gTestWidth;
  gTest.Height = _gTestHeight;
  gTest.BackgroundColor = _gBackgroundColor;
  gTest.BorderColor = _gBorderColor;
}

function testGUIBounds() {
  Test("GUI Bounds");
  gTest.TweenPosition(0.5, -GetScreenWidth(), -GetScreenHeight());
  ExpectIntToBe("X", gTest.X, -GetScreenWidth());
  ExpectIntToBe("Y", gTest.Y, -GetScreenHeight());

  gTest.TweenPosition(0.5, GetScreenWidth() + 1, GetScreenHeight() + 1);
  #ifdef SCRIPT_API_v350
  ExpectIntToBe("X", gTest.X, GetScreenWidth() + 1);
  ExpectIntToBe("X", gTest.Y, GetScreenHeight() + 1);
  #endif
  #ifndef SCRIPT_API_v350
  ExpectIntToBe("X", gTest.X, GetScreenWidth() - 1);
  ExpectIntToBe("X", gTest.Y, GetScreenHeight() - 1);
  #endif

  RestoreTestGUI();

  gTest.TweenSize(1.0, 0, 0);
  ExpectIntToBe("Width is 0", gTest.Width, 1);
  ExpectIntToBe("Height is 0", gTest.Height, 1);

  gTest.TweenSize(1.0, GetScreenWidth() * 2, GetScreenHeight() * 2);
  #ifdef SCRIPT_API_v350
  ExpectIntToBe("Width", gTest.Width, GetScreenWidth() * 2);
  ExpectIntToBe("Height", gTest.Height, GetScreenHeight() * 2);
  #endif
  #ifndef SCRIPT_API_v350
  ExpectIntToBe("Width", gTest.Width, GetScreenWidth());
  ExpectIntToBe("Height", gTest.Height, GetScreenHeight());
  #endif

  RestoreTestGUI();
}

function testBackgroundColor() {
  SaveTestGUI();
  Test("GUI Background Color");
  int toColor = Game.GetColorFromRGB(255, 0, 0);
  
  gTest.TweenBackgroundColor(0.5, toColor, eEaseInBackTween);
  ExpectIntToBe("Background Color", gTest.BackgroundColor, toColor);
  
  RestoreTestGUI();
  gTest.TweenBackgroundColor(0.5, toColor, eEaseLinearTween, eNoBlockTween);
  gTest.StopTweenBackgroundColor(eFinishTween);
  ExpectIntToBe("Background Color", gTest.BackgroundColor, toColor);
  
  RestoreTestGUI();
}

function testBorderColor() {
  SaveTestGUI();
  Test("GUI Border Color");
  
  int toColor = Game.GetColorFromRGB(255, 0, 0);
  
  gTest.TweenBorderColor(0.5, toColor, eEaseInBackTween);
  ExpectIntToBe("Border Color", gTest.BorderColor, toColor);
  
  RestoreTestGUI();
  gTest.TweenBorderColor(0.5, toColor, eEaseLinearTween, eNoBlockTween);
  gTest.StopTweenBorderColor(eFinishTween);
  ExpectIntToBe("Background Color", gTest.BorderColor, toColor);
  
  RestoreTestGUI();
}

function room_AfterFadeIn()
{
  StartCutscene(eSkipESCOnly);
  
  //testGUIBounds();
  testBackgroundColor();
  testBorderColor();
 
  EndCutscene();
  player.ChangeRoom(99);
}

function room_Load()
{
  SaveTestGUI();
  gTest.Visible = true;
}

function room_Leave()
{
  gTest.Visible = false;
  RestoreTestGUI();
}

function room_RepExec()
{

}
