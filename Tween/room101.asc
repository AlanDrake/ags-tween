// GUI Tests (room 6) script file

int _gTestX, _gTestY, _gTestWidth, _gTestHeight;

function SaveTestGUI() {
  _gTestX = gTest.X;
  _gTestY = gTest.Y;
  _gTestWidth = gTest.Width;
  _gTestHeight = gTest.Height;
}

function RestoreTestGUI() {
  gTest.X = _gTestX;
  gTest.Y = _gTestY;
  gTest.Width = _gTestWidth;
  gTest.Height = _gTestHeight;
}

function testGUIBounds() {
  gTest.TweenPosition(0.5, -GetScreenWidth(), -GetScreenHeight());
  Expect.EqualsInt("X", gTest.X, -GetScreenWidth());
  Expect.EqualsInt("Y", gTest.Y, -GetScreenHeight());

  gTest.TweenPosition(0.5, GetScreenWidth() + 1, GetScreenHeight() + 1);
  #ifdef SCRIPT_API_v350
  Expect.EqualsInt("X", gTest.X, GetScreenWidth() + 1);
  Expect.EqualsInt("X", gTest.Y, GetScreenHeight() + 1);
  #endif
  #ifndef SCRIPT_API_v350
  Expect.EqualsInt("X", gTest.X, GetScreenWidth() - 1);
  Expect.EqualsInt("X", gTest.Y, GetScreenHeight() - 1);
  #endif

  RestoreTestGUI();
  
  gTest.TweenSize(1.0, 0, 0);
  Expect.EqualsInt("Width is 0", gTest.Width, 1);
  Expect.EqualsInt("Height is 0", gTest.Height, 1);

  gTest.TweenSize(1.0, GetScreenWidth() * 2, GetScreenHeight() * 2);
  #ifdef SCRIPT_API_v350
  Expect.EqualsInt("Width", gTest.Width, GetScreenWidth() * 2);
  Expect.EqualsInt("Height", gTest.Height, GetScreenHeight() * 2);
  #endif
  #ifndef SCRIPT_API_v350
  Expect.EqualsInt("Width", gTest.Width, GetScreenWidth());
  Expect.EqualsInt("Height", gTest.Height, GetScreenHeight());
  #endif

  RestoreTestGUI();
}

function room_AfterFadeIn()
{
  StartCutscene(eSkipESCOnly);
  testGUIBounds();
  player.ChangeRoom(99);
  EndCutscene();
}

function room_Load()
{
  SaveTestGUI();
  gTest.Visible = true;
}

function room_Leave()
{
  gTest.Visible = false;
  RestoreTestGUI();
}

function room_RepExec()
{

}
